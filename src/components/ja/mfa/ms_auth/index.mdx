import If from "@components/utils/If.astro";
import AltAddMethod from "../AltAddMethod.mdx";

import firstNext from "./first_next.png";
import altNext from "./alt_next.png";
import firstLink from "./first_link.png";
import firstQr from "./first_qr.png";
import altLink from "./alt_link.png";
import altQr from "./alt_qr.png";
import screen from "./screen.png";
import list from "./list.png";

{/**
  * @typedef {object} Props
  * @property {import("@components/pages/mfa/tabs").Step} step
  */}

<ol>
  <li>
    <If cond={props.step === "alt"}>（まだしていなければ）</If>スマホに「Microsoft Authenticator」アプリをインストールしてください．Androidの人は[Google Play](https://play.google.com/store/apps/details?id=com.azure.authenticator)から，iPhoneの人は[App Store](https://apps.apple.com/app/microsoft-authenticator/id983156458)からダウンロードできます．
  </li>

  <If cond={props.step === "alt"}>
    <Fragment>
      <AltAddMethod selection="「認証アプリ」" />
      <li>
        Microsoft Authenticatorの設定をする画面が出るので，そのまま「次へ」を押してください．
        <img src={altNext}/>
      </li>
    </Fragment>
    <Fragment slot="else">
      <li>
        アプリのインストールを終えたら元の画面に戻って作業を続けます．デフォルトでMicrosoft Authenticatorの設定をする画面になっているので，そのまま「次へ」を押してください．
        <img src={firstNext} />
      </li>
    </Fragment>
  </If>

  <li>
    以降の手順はこの作業をスマホ（Microsoft Authenticatorアプリをインストールしたもの）でしているかそれ以外（パソコンなど）でしているかによって異なります．

    - **スマホでこの作業をしている場合**：「このリンクをクリックして、アカウントをアプリにペアリングします。」を押してください．Microsoft Authenticatorアプリに移動し，自分のUTokyo Accountが表示されればOKです．
      <img src={{ firstLink, altLink }[`${props.step}Link`]} />
    - **スマホ以外（パソコンなど）でこの作業をしている場合**
      1. 画面の指示に従ってQRコードを表示してください．
          <img src={{ firstQr, altQr }[`${props.step}Qr`]} />
      2. スマホでMicrosoft Authenticatorアプリを開き，画面右上の「+」を押してから，「職場または学校アカウント」「QRコードをスキャン」の順に選択してください．
          <img src={screen} />
      3. QRコードを読み取ってください．
      4. アプリ上に自分のUTokyo Accountが表示されればOKです．
          <img src={list} />
  </li>
</ol>
