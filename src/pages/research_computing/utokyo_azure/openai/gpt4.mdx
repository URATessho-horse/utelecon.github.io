## Azure AI Studio のプロジェクトにモデルをデプロイする

一例として GPT4 チャットモデルをデプロイします．

- トップページ画面左側のリストから，`チャット`を選択します．

![](img/01_aistudiogpt1.png){:.medium.center.border}

- メイン画面がセットアップになりますので，`＋デプロイを作成`をクリックしてください．

![](img/02_aistudiogpt2.png){:.medium.center.border}

- モデル選択画面になりますので，左側のリストから`gpt-4`を選択し，右下にある`確認`をクリックしてください．

![](img/03_aistudiogpt3.png){:.medium.center.border}

- 確認画面になるので，`デプロイ`をクリックしてください．

![](img/04_aistudiogpt4.png){:.medium.center.border}

- 下図のようなチャットプレイグランドが表示されたら完了です．
  - `デプロイ`をクリックしてからデプロイ完了まで時間がかかる場合があります．
  - 5分以上待っても変化がない場合は，ブラウザを再読み込みしてみてください．それでもチャットグランドが表示されない場合は，改めてデプロイしなおしてみてください．

![](img/05_aistudiogpt5.png){:.medium.center.border}

### 補足

- テキストボックスにメッセージを入力し，三角形をクリック（または「Enter」キーを押す）してモデルに送信します．画面右下のトークン数は，このメッセージのトークンとこのモデルのトークン制限を表します．一例として下図では，このメッセージを送信するには582トークンが使用され，全体のトークン制限は128000トークンです．画面左の**モデルに指示とコンテキストを与える**テキストボックスに「システムプロンプト」（またはGPTへの指示）を入力できます．

![](img/06_aistudiogpt6.png){:.medium.center.border}

> **注意**：GPTにメッセージを送信するたびに新しいメッセージと一緒にメッセージ履歴全体が送信され，トークンの消費量はその累積ベースで計算されます．
> 
> たとえば，これまでのメッセージと返信がそれぞれ2，5，1，7，11，1トークンで構成されている場合，新たに9トークンで構成されるメッセージを送信すると，この送信要求は実際には2+5+1+7+11+1+9=36トークンで構成されます．
> 
> この考え方で累積全体のトークン消費を計算すると，(2) + (2+5) + (2+5+1) + (2+5+1+7) + (2+5+1+7+11) + (2+5+1+7+11+1) + (2+5+1+7+11+1+9)=121 トークンとなります．
> 
> OpenAI が提供する ChatGPT アプリケーションとは異なり，Azure OpenAI サービスはトークンによって課金されるため，トークンの消費方法に注意してください．
